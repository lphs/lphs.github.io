<!DOCTYPE html>
<html>
<head>
<script>
const days = ["SUN", "MON", "TUE", "WED", "THU", "FRI", "SAT"]
var timings;
function load(){
  var xhr = new XMLHttpRequest();
  xhr.open("GET", "/timings.txt", true);
  xhr.onreadystatechange = function() {
    if(xhr.readyState == 4 && xhr.status == 200){
      timings = xhr.responseText;
    }
  };
  xhr.send(null);
}
function update(){
  console.log(timings);
  var now = new Date();
  var day = days[now.getDay()];
  var TimeTableRE = new RegExp("\\|"+day+"\\|.*\n([\\S\\s]*)\\|.*\\|", "g");
  if(TimeTableRE.test(timings)){
  	console.log(TimeTableRE);
    console.log(timings.match(TimeTableRE));
  }
}
</script>
</head>
<body onload="load(); update();">
<p>Timing: <br><span id="time"></span></p>  
</body>
</html>
